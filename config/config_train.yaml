seed: 13
device: cuda
sr: 44100  # target sample rate
dur_samples: ${pow:2,15}

# TODO:
# create log root dir for experiment
# create subdirs for wandb, hydra, checkpoints, img

wandb_save_dir: ${oc.env:HOME}/cosi/
wandb_project: cosi
wandb_run: dev-run

dir_checkpoints: ${oc.env:HOME}/cosi/src/checkpoints

defaults:
  - features: jtfs
  - datamodule: sol
  - transform: default
  - net: autoencoder/conv
  - model: autoencoder
  - optim: default
  - logger: wandb
  - callbacks: default
  - _self_

features:
  sr: ${sr}
  device: ${device}

datamodule:
  batch_size: 32
  num_workers: 8
  transform: ${transform}
  # sampler:
  # collate_fn:

net:
  sr: ${sr}

model:
  loss_fn:
    _target_: torch.nn.MSELoss
  loss_weights:
    recon: 1.0

# trainer:
#   _target_: lightning.pytorch.Trainer
#   deterministic: True
#   accelerator: gpu
#   devices: 1
#   max_epochs: 100
#   precision: 16
#   callbacks:
#     # - early_stopping:
#     #     monitor: val_loss
#     #     patience: 10
#     #     mode: min
#     # - model_checkpoint:
#     #     monitor: val_loss
#     #     mode: min
#     #     save_top_k: 1
#     #     filename: "{epoch}-{val_loss:.2f}"
#     # - lr_monitor:
#     #     logging_interval: step
#   early_stopping: false
#   logger: wandb
#   log_every_n_steps: 50